# WhatsChat 变更日志

## 📋 概述

本文档记录了 WhatsChat 项目的所有重要变更，包括新功能、bug修复、性能优化和破坏性变更。

---

## [未发布]

### 计划中的功能

- 群组语音通话支持
- 消息加密功能
- 多语言界面支持
- 移动端推送通知优化

---

## [1.2.0] - 2024-01-15

### 🎉 新功能

- **语音消息录制**: 支持录制和发送语音消息
- **群组管理增强**: 新增群组设置、成员管理功能
- **消息搜索**: 支持全文搜索聊天记录
- **文件预览**: 支持图片、视频、文档预览
- **在线状态**: 显示用户在线/离线状态
- **消息撤回**: 支持撤回已发送的消息

### 🔧 改进

- **性能优化**: 优化消息加载和渲染性能
- **UI/UX改进**: 重新设计聊天界面，提升用户体验
- **响应式设计**: 改进移动端适配
- **错误处理**: 增强错误处理和用户反馈
- **缓存优化**: 优化Redis缓存策略

### 🐛 修复

- 修复WebSocket连接超时问题
- 解决文件上传失败的问题
- 修复消息重复发送的bug
- 解决移动端键盘遮挡问题
- 修复群组消息通知问题

### 🔒 安全

- 加强密码验证规则
- 修复XSS漏洞
- 增强API安全验证
- 改进文件上传安全检查

### 📚 文档

- 完善API文档
- 添加部署指南
- 更新开发文档
- 新增故障排除指南

---

## [1.1.0] - 2024-01-01

### 🎉 新功能

- **视频通话**: 支持一对一视频通话
- **文件共享**: 支持图片、视频、文档上传
- **群组聊天**: 支持创建和管理群组
- **消息类型**: 支持文本、图片、视频、音频消息
- **用户状态**: 支持自定义状态信息
- **消息已读**: 显示消息已读状态

### 🔧 改进

- 优化数据库查询性能
- 改进WebSocket连接稳定性
- 增强移动端兼容性
- 优化消息加载速度

### 🐛 修复

- 修复登录状态丢失问题
- 解决消息发送失败问题
- 修复移动端界面适配问题
- 解决数据库连接超时问题

### 🔒 安全

- 实施JWT令牌刷新机制
- 加强输入验证
- 改进密码加密策略
- 增强CORS配置

---

## [1.0.0] - 2023-12-15

### 🎉 初始版本

- **用户认证**: 注册、登录、密码重置
- **实时聊天**: 基于WebSocket的实时消息
- **联系人管理**: 添加、删除、搜索联系人
- **音频通话**: 支持一对一音频通话
- **消息历史**: 消息记录和存储
- **响应式设计**: 支持桌面和移动设备

### 🏗️ 技术架构

- **前端**: Next.js 15 + TypeScript + Tailwind CSS
- **后端**: Node.js + Express + Prisma + PostgreSQL
- **实时通信**: WebSocket + WebRTC
- **缓存**: Redis
- **部署**: Docker + Kubernetes

### 📱 平台支持

- Web应用 (Chrome, Firefox, Safari, Edge)
- 移动端响应式设计
- PWA支持

---

## [0.9.0] - 2023-12-01

### 🎉 Beta版本

- 基础聊天功能
- 用户认证系统
- 简单的消息界面
- 基本的WebSocket通信

### 🔧 改进

- 优化消息发送性能
- 改进用户界面设计
- 增强错误处理

### 🐛 修复

- 修复消息重复问题
- 解决连接断开重连问题
- 修复移动端显示问题

---

## [0.8.0] - 2023-11-15

### 🎉 Alpha版本

- 项目初始架构搭建
- 基础用户管理功能
- 简单的消息系统
- 基本的WebSocket实现

### 🏗️ 基础设施

- 数据库设计和迁移
- API接口设计
- 前端组件架构
- 开发环境配置

---

## 版本说明

### 版本号规范

本项目使用[语义化版本](https://semver.org/)规范：

- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型

- **Added**: 新功能
- **Changed**: 对现有功能的变更
- **Deprecated**: 不再建议使用，未来版本将移除
- **Removed**: 在此版本中移除的功能
- **Fixed**: 任何bug修复
- **Security**: 安全相关修复

### 破坏性变更

破坏性变更会在版本说明中明确标注，并提供迁移指南。

---

## 贡献指南

### 如何贡献

1. Fork项目
2. 创建功能分支
3. 提交变更
4. 创建Pull Request

### 提交规范

使用[Conventional Commits](https://www.conventionalcommits.org/)规范：

```bash
feat: add voice message recording
fix: resolve WebSocket timeout issue
docs: update API documentation
style: format code with prettier
refactor: extract message validation logic
test: add unit tests for user service
```

### 代码审查

所有代码变更都需要经过代码审查：

- 至少一位维护者审查
- 通过所有自动化测试
- 符合项目代码规范

---

## 发布流程

### 发布步骤

1. **功能开发**: 在feature分支开发
2. **测试验证**: 充分测试新功能
3. **代码审查**: PR审查通过
4. **合并主分支**: 合并到main分支
5. **版本标记**: 创建git tag
6. **发布说明**: 更新CHANGELOG
7. **部署发布**: 部署到生产环境

### 发布检查清单

- [ ] 所有测试通过
- [ ] 代码审查完成
- [ ] 文档更新
- [ ] CHANGELOG更新
- [ ] 版本号更新
- [ ] 发布说明准备
- [ ] 部署验证

---

## 支持与反馈

### 问题报告

- **Bug报告**: 使用GitHub Issues
- **功能请求**: 使用GitHub Issues
- **安全问题**: 发送邮件至 security@whatschat.com

### 社区支持

- **GitHub**: https://github.com/whatschat/whatschat
- **Discord**: https://discord.gg/whatschat
- **邮箱**: support@whatschat.com

---

## 许可证

本项目采用MIT许可证。详见[LICENSE](../LICENSE)文件。

---

## 致谢

感谢所有为WhatsChat项目做出贡献的开发者！

### 核心贡献者

- [@felix-zhu](https://github.com/felix-zhu) - 项目维护者
- [@contributor1](https://github.com/contributor1) - 核心开发者
- [@contributor2](https://github.com/contributor2) - 前端开发者
- [@contributor3](https://github.com/contributor3) - 后端开发者

### 特别感谢

- 所有测试用户和反馈者
- 开源社区的支持
- 技术栈的维护者

---
