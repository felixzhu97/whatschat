# WhatsChat é¡¹ç›®æ–‡æ¡£

æœ¬æ–‡ä»¶å¤¹åŒ…å«äº† WhatsChat é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–‡æ¡£ï¼Œæ¶µç›–æ¶æ„è®¾è®¡ã€å¼€å‘æŒ‡å—ã€éƒ¨ç½²è¿ç»´ç­‰å„ä¸ªæ–¹é¢ã€‚

## ğŸ“š æ–‡æ¡£åˆ†ç±»

### ğŸ—ï¸ Architecture Design

#### C4 Diagrams

- [`architecture/c4-system-context.puml`](./architecture/c4-system-context.puml) - System context diagram (Level 1)
- [`architecture/c4-container.puml`](./architecture/c4-container.puml) - Container diagram (Level 2)
- [`architecture/c4-web-components.puml`](./architecture/c4-web-components.puml) - Web application component diagram (Level 3)
- [`architecture/c4-mobile-components.puml`](./architecture/c4-mobile-components.puml) - Mobile application component diagram (Level 3)
- [`architecture/c4-code.puml`](./architecture/c4-code.puml) - Code structure diagram (Level 4)
- [`architecture/architecture-overview.puml`](./architecture/architecture-overview.puml) - System architecture overview
- [`architecture/c4-deployment.puml`](./architecture/c4-deployment.puml) - Deployment architecture diagram

#### TOGAF Enterprise Architecture

- [`architecture/togaf/overview.puml`](./architecture/togaf/overview.puml) - TOGAF architecture overview
- [`architecture/togaf/business-architecture.puml`](./architecture/togaf/business-architecture.puml) - Business architecture
- [`architecture/togaf/application-architecture.puml`](./architecture/togaf/application-architecture.puml) - Application architecture
- [`architecture/togaf/data-architecture.puml`](./architecture/togaf/data-architecture.puml) - Data architecture
- [`architecture/togaf/technology-architecture.puml`](./architecture/togaf/technology-architecture.puml) - Technology architecture

See [TOGAF directory README](./architecture/togaf/README.md) for details.

#### æ²ƒå¾·åˆ©åœ°å›¾

- [`wardley-map/wardley-map.puml`](./wardley-map/wardley-map.puml) - æ²ƒå¾·åˆ©åœ°å›¾ (Wardley Map) - å±•ç¤ºç³»ç»Ÿç»„ä»¶åœ¨ä»·å€¼é“¾å’Œæ¼”åŒ–è½´ä¸Šçš„æˆ˜ç•¥ä½ç½®

#### ç”¨æˆ·æ—…ç¨‹åœ°å›¾

- [`user-journey-map/user-journey-map.puml`](./user-journey-map/user-journey-map.puml) - ç”¨æˆ·æ—…ç¨‹åœ°å›¾ (User Journey Map) - å±•ç¤ºç”¨æˆ·ä»æ³¨å†Œåˆ°ä½¿ç”¨äº§å“çš„å®Œæ•´æ—…ç¨‹ï¼ŒåŒ…æ‹¬å„é˜¶æ®µçš„ç”¨æˆ·è¡Œä¸ºã€è§¦ç‚¹ã€æƒ…æ„Ÿä½“éªŒã€ç—›ç‚¹å’Œæ”¹è¿›æœºä¼š

#### æ—¶åºå›¾

- [`architecture/sequence-diagrams/README.md`](./architecture/sequence-diagrams/README.md) - æ—¶åºå›¾ç´¢å¼•
- [`architecture/sequence-diagrams/user-auth-sequence.puml`](./architecture/sequence-diagrams/user-auth-sequence.puml) - ç”¨æˆ·è®¤è¯æµç¨‹
- [`architecture/sequence-diagrams/message-flow-sequence.puml`](./architecture/sequence-diagrams/message-flow-sequence.puml) - æ¶ˆæ¯é€šä¿¡æµç¨‹
- [`architecture/sequence-diagrams/webrtc-call-sequence.puml`](./architecture/sequence-diagrams/webrtc-call-sequence.puml) - éŸ³è§†é¢‘é€šè¯æµç¨‹
- [`architecture/sequence-diagrams/group-management-sequence.puml`](./architecture/sequence-diagrams/group-management-sequence.puml) - ç¾¤ç»„ç®¡ç†æµç¨‹
- [`architecture/sequence-diagrams/file-upload-sequence.puml`](./architecture/sequence-diagrams/file-upload-sequence.puml) - æ–‡ä»¶ç®¡ç†æµç¨‹
- [`architecture/sequence-diagrams/deployment-sequence.puml`](./architecture/sequence-diagrams/deployment-sequence.puml) - ç³»ç»Ÿéƒ¨ç½²æµç¨‹

#### æ•°æ®åº“è®¾è®¡

- [`architecture/database/database-design.md`](./architecture/database/database-design.md) - æ•°æ®åº“è®¾è®¡æ–‡æ¡£ (ERå›¾ã€æ•°æ®æ¨¡å‹)

#### æŠ€æœ¯å†³ç­–

- [`architecture/decisions/adr.md`](./architecture/decisions/adr.md) - æŠ€æœ¯å†³ç­–è®°å½• (ADR)

### ğŸ“‹ éœ€æ±‚ä¸è§„èŒƒ

- [`requirements/functional/requirements.md`](./requirements/functional/requirements.md) - éœ€æ±‚æ¸…å• (åŠŸèƒ½éœ€æ±‚ã€éåŠŸèƒ½éœ€æ±‚)
- [`project-records/glossary/glossary.md`](./project-records/glossary/glossary.md) - æœ¯è¯­è¡¨ (é¡¹ç›®æœ¯è¯­å®šä¹‰)

### ğŸ”§ å¼€å‘æ–‡æ¡£

- [`development/api/api-documentation.md`](./development/api/api-documentation.md) - APIæ¥å£æ–‡æ¡£
- [`development/guides/development-guide.md`](./development/guides/development-guide.md) - å¼€å‘æŒ‡å—
- [`development/testing/testing-guide.md`](./development/testing/testing-guide.md) - æµ‹è¯•æŒ‡å—
- [`development/contributing/contributing-guide.md`](./development/contributing/contributing-guide.md) - è´¡çŒ®æŒ‡å—

### ğŸ–¥ï¸ æœåŠ¡å™¨æ–‡æ¡£

- [`server/README.md`](./server/README.md) - æœåŠ¡å™¨ä¸»è¦æ–‡æ¡£ï¼ˆå¿«é€Ÿå¼€å§‹ã€ç¯å¢ƒé…ç½®ã€APIè¯´æ˜ï¼‰
- [`server/MIGRATION.md`](./server/MIGRATION.md) - Expressåˆ°NestJSè¿ç§»è¯´æ˜
- [`server/DOCKER.md`](./server/DOCKER.md) - Dockerç¯å¢ƒæœåŠ¡éƒ¨ç½²æŒ‡å—
- [`server/testing.md`](./server/testing.md) - æµ‹è¯•æ–‡æ¡£

### ğŸš€ éƒ¨ç½²è¿ç»´

- [`operations/deployment/deployment-guide.md`](./operations/deployment/deployment-guide.md) - éƒ¨ç½²æŒ‡å—
- [`operations/security/security-guide.md`](./operations/security/security-guide.md) - å®‰å…¨æŒ‡å—
- [`operations/troubleshooting/troubleshooting-guide.md`](./operations/troubleshooting/troubleshooting-guide.md) - æ•…éšœæ’é™¤æŒ‡å—

### ğŸ“ é¡¹ç›®è®°å½•

- [`project-records/changelog/CHANGELOG.md`](./project-records/changelog/CHANGELOG.md) - å˜æ›´æ—¥å¿—

## ğŸ”§ å¦‚ä½•æŸ¥çœ‹æ¶æ„å›¾

### æ–¹æ³•ä¸€ï¼šåœ¨çº¿æŸ¥çœ‹

1. è®¿é—® [PlantUML åœ¨çº¿ç¼–è¾‘å™¨](https://www.plantuml.com/plantuml/uml/)
2. å°† `.puml` æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ°ç¼–è¾‘å™¨ä¸­
3. ç‚¹å‡» "Submit" ç”Ÿæˆå›¾ç‰‡

### æ–¹æ³•äºŒï¼šä½¿ç”¨ VS Code æ’ä»¶

1. å®‰è£… [PlantUML æ’ä»¶](https://marketplace.visualstudio.com/items?itemName=jebbs.plantuml)
2. åœ¨ VS Code ä¸­æ‰“å¼€ `.puml` æ–‡ä»¶
3. æŒ‰ `Alt+D` é¢„è§ˆå›¾ç‰‡

### æ–¹æ³•ä¸‰ï¼šæœ¬åœ°å®‰è£… PlantUML

```bash
# å®‰è£… Java (å¦‚æœæœªå®‰è£…)
brew install java

# å®‰è£… PlantUML
brew install plantuml

# ç”Ÿæˆ PNG å›¾ç‰‡
plantuml docs/*.puml

# ç”Ÿæˆ SVG å›¾ç‰‡
plantuml -tsvg docs/*.puml
```

## ğŸ“Š æ¶æ„å›¾è¯¦ç»†è¯´æ˜

### 1. ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾ (System Context)

**ç›®æ ‡å—ä¼—ï¼š** æ‰€æœ‰é¡¹ç›®ç›¸å…³äººå‘˜  
**æŠ½è±¡çº§åˆ«ï¼š** æœ€é«˜å±‚æ¬¡

å±•ç¤º WhatsChat ç³»ç»Ÿä¸å¤–éƒ¨å®ä½“çš„äº¤äº’å…³ç³»ï¼š

- **ç”¨æˆ·è§’è‰²**ï¼šæ™®é€šç”¨æˆ·ã€è”ç³»äººã€ç³»ç»Ÿç®¡ç†å‘˜
- **å¤–éƒ¨ç³»ç»Ÿ**ï¼šWebRTCæœåŠ¡ã€äº‘å­˜å‚¨ã€æ¨é€é€šçŸ¥ã€CDNã€é‚®ä»¶æœåŠ¡ã€æ•°æ®åˆ†æã€ç›‘æ§æŠ¥è­¦
- **ç³»ç»Ÿè¾¹ç•Œ**ï¼šæ˜ç¡®å®šä¹‰ç³»ç»ŸèŒè´£èŒƒå›´
- **äº¤äº’åè®®**ï¼šHTTPSã€WebSocketã€WebRTCã€S3 APIã€FCM/APNsç­‰

### 2. å®¹å™¨å›¾ (Container Diagram)

**ç›®æ ‡å—ä¼—ï¼š** æ¶æ„å¸ˆã€æŠ€æœ¯è´Ÿè´£äºº  
**æŠ½è±¡çº§åˆ«ï¼š** ç³»ç»Ÿå†…éƒ¨å®¹å™¨

å±•ç¤ºç³»ç»Ÿå†…éƒ¨çš„ä¸»è¦å®¹å™¨å’ŒæŠ€æœ¯æ ˆï¼š

- **å‰ç«¯å®¹å™¨**ï¼šNext.js Webåº”ç”¨ã€Flutterç§»åŠ¨åº”ç”¨
- **åç«¯å®¹å™¨**ï¼šNode.js APIæœåŠ¡ã€WebSocketæœåŠ¡
- **æ•°æ®å­˜å‚¨**ï¼šPostgreSQLä¸»æ•°æ®åº“ã€Redisç¼“å­˜ã€MinIO/S3æ–‡ä»¶å­˜å‚¨ã€Elasticsearchæœç´¢
- **åŸºç¡€è®¾æ–½**ï¼šAPIç½‘å…³ã€è´Ÿè½½å‡è¡¡å™¨
- **å¤–éƒ¨æœåŠ¡é›†æˆ**ï¼šæ¨é€æœåŠ¡ã€é‚®ä»¶æœåŠ¡ã€ç›‘æ§æœåŠ¡

### 3. Webåº”ç”¨ç»„ä»¶å›¾ (Component Diagram)

**ç›®æ ‡å—ä¼—ï¼š** å‰ç«¯å¼€å‘è€…  
**æŠ½è±¡çº§åˆ«ï¼š** Webåº”ç”¨å†…éƒ¨ç»„ä»¶

å±•ç¤º Web åº”ç”¨çš„è¯¦ç»†ç»„ä»¶ç»“æ„ï¼š

- **é¡µé¢å±‚**ï¼šç™»å½•ã€æ³¨å†Œã€ä¸»é¡µé¢
- **ç»„ä»¶å±‚**ï¼šèŠå¤©ç•Œé¢ã€ä¾§è¾¹æ ã€é€šè¯ç•Œé¢ã€æ¶ˆæ¯ç»„ä»¶
- **Hookå±‚**ï¼šè®¤è¯ã€èŠå¤©ã€é€šè¯ã€è¯­éŸ³å½•åˆ¶ã€æœç´¢ã€å¯¹è¯æ¡†ã€å¯¼èˆªç­‰çŠ¶æ€ç®¡ç†
- **æœåŠ¡å±‚**ï¼šWebSocketã€WebRTCã€å­˜å‚¨ã€æœç´¢ã€è§¦è§‰åé¦ˆ
- **çŠ¶æ€ç®¡ç†**ï¼šZustandçŠ¶æ€å­˜å‚¨ï¼ˆæ¶ˆæ¯ã€è”ç³»äººã€é€šè¯ã€è®¾ç½®ï¼‰
- **å·¥å…·å±‚**ï¼šæ¶ˆæ¯å¤„ç†å·¥å…·ã€æ¨¡æ‹Ÿæ•°æ®ç®¡ç†

### 4. ç§»åŠ¨åº”ç”¨ç»„ä»¶å›¾ (Mobile Component Diagram)

**ç›®æ ‡å—ä¼—ï¼š** ç§»åŠ¨ç«¯å¼€å‘è€…  
**æŠ½è±¡çº§åˆ«ï¼š** Flutteråº”ç”¨å†…éƒ¨ç»„ä»¶

å±•ç¤º Flutter ç§»åŠ¨åº”ç”¨çš„ç»„ä»¶ç»“æ„ï¼š

- **å±å¹•å±‚**ï¼šä¸»å±å¹•ã€èŠå¤©åˆ—è¡¨ã€èŠå¤©è¯¦æƒ…ã€é€šè¯è®°å½•ç­‰
- **ç»„ä»¶å±‚**ï¼šæ¶ˆæ¯æ°”æ³¡ã€èŠå¤©è¾“å…¥æ¡†ã€è¯­éŸ³æ’­æ”¾å™¨ã€é€šè¯ç•Œé¢
- **æœåŠ¡å±‚**ï¼šWebSocketã€WebRTCã€å­˜å‚¨ã€éŸ³é¢‘ã€æ–‡ä»¶ã€é€šçŸ¥æœåŠ¡
- **æ•°æ®æ¨¡å‹**ï¼šç”¨æˆ·ã€èŠå¤©ã€æ¶ˆæ¯ã€é€šè¯ã€çŠ¶æ€æ¨¡å‹
- **çŠ¶æ€ç®¡ç†**ï¼šProviderçŠ¶æ€ç®¡ç†

### 5. ä»£ç ç»“æ„å›¾ (Code Diagram)

**ç›®æ ‡å—ä¼—ï¼š** å¼€å‘è€…  
**æŠ½è±¡çº§åˆ«ï¼š** å…·ä½“ä»£ç æ–‡ä»¶

å±•ç¤ºæ ¸å¿ƒæ¨¡å—çš„å…·ä½“ä»£ç ç»“æ„ï¼š

- **Webåº”ç”¨ä»£ç ç»“æ„**ï¼š
  - é¡µé¢å±‚ (app/): Next.jsé¡µé¢å’Œå¸ƒå±€
  - ç»„ä»¶å±‚ (components/): Reactç»„ä»¶ï¼ˆå·²é‡æ„ä¼˜åŒ–ï¼‰
  - Hookså±‚ (hooks/): è‡ªå®šä¹‰Hookï¼ˆuseMessagesã€useSearchã€useDialogsã€useNavigationï¼‰
  - çŠ¶æ€ç®¡ç† (stores/): ZustandçŠ¶æ€å­˜å‚¨
  - å·¥å…·åº“ (lib/): æ ¸å¿ƒæœåŠ¡å’Œå·¥å…·å‡½æ•°ï¼ˆmessage-utilsï¼‰
  - ç±»å‹å®šä¹‰ (types/): TypeScriptç±»å‹
  - æ•°æ®å±‚ (data/): æ¨¡æ‹Ÿæ•°æ®é›†ä¸­ç®¡ç†

- **ç§»åŠ¨åº”ç”¨ä»£ç ç»“æ„**ï¼š
  - å±å¹•å±‚ (screens/): Flutterå±å¹•Widget
  - ç»„ä»¶å±‚ (widgets/): å¯å¤ç”¨Widget
  - æ¨¡å‹å±‚ (models/): Dartæ•°æ®æ¨¡å‹
  - æœåŠ¡å±‚ (services/): DartæœåŠ¡å®ç°
  - ä¸»é¢˜å±‚ (themes/): Flutterä¸»é¢˜å®šä¹‰

### 6. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ (Architecture Overview)

**ç›®æ ‡å—ä¼—ï¼š** æ¶æ„å¸ˆã€æŠ€æœ¯ç®¡ç†è€…  
**æŠ½è±¡çº§åˆ«ï¼š** æ•´ä½“æŠ€æœ¯æ¶æ„

å±•ç¤ºå®Œæ•´çš„æŠ€æœ¯æ ˆå’Œåˆ†å±‚æ¶æ„ï¼š

- **ç”¨æˆ·ç•Œé¢å±‚**ï¼šWebå‰ç«¯æŠ€æœ¯æ ˆã€ç§»åŠ¨å‰ç«¯æŠ€æœ¯æ ˆ
- **é€šä¿¡åè®®å±‚**ï¼šWebSocketã€WebRTCã€HTTP/HTTPSã€SSE
- **ä¸šåŠ¡é€»è¾‘å±‚**ï¼šå‰ç«¯ä¸šåŠ¡é€»è¾‘ã€åç«¯ä¸šåŠ¡é€»è¾‘
- **æ•°æ®è®¿é—®å±‚**ï¼šå‰ç«¯æ•°æ®å±‚ã€åç«¯æ•°æ®å±‚
- **åŸºç¡€è®¾æ–½å±‚**ï¼šå­˜å‚¨æœåŠ¡ã€è¿è¡Œæ—¶ç¯å¢ƒã€éƒ¨ç½²ç¯å¢ƒ
- **å¤–éƒ¨æœåŠ¡å±‚**ï¼šç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **å¼€å‘å·¥å…·é“¾**ï¼šæ„å»ºå·¥å…·ã€ä»£ç è´¨é‡ã€æµ‹è¯•æ¡†æ¶

### 7. éƒ¨ç½²æ¶æ„å›¾ (Deployment Diagram)

**ç›®æ ‡å—ä¼—ï¼š** è¿ç»´å·¥ç¨‹å¸ˆã€DevOps  
**æŠ½è±¡çº§åˆ«ï¼š** ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

å±•ç¤ºç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²ç»“æ„ï¼š

- **ç”¨æˆ·æ¥å…¥å±‚**ï¼šå¤šè®¾å¤‡æ”¯æŒã€è·¨å¹³å°å…¼å®¹
- **å†…å®¹åˆ†å‘å±‚**ï¼šCDNå…¨çƒåŠ é€Ÿã€é™æ€èµ„æºç¼“å­˜
- **æ¥å…¥å±‚**ï¼šè´Ÿè½½å‡è¡¡ã€SSLç»ˆç«¯ã€APIç½‘å…³
- **åº”ç”¨æœåŠ¡å±‚**ï¼šKubernetesé›†ç¾¤ã€å®¹å™¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨æ‰©ç¼©å®¹
- **æ•°æ®æŒä¹…å±‚**ï¼šä¸»ä»æ¶æ„ã€å®šæœŸå¤‡ä»½
- **æ–‡ä»¶å­˜å‚¨å±‚**ï¼šå¯¹è±¡å­˜å‚¨ã€å¼‚åœ°å®¹ç¾
- **ç›‘æ§è¿ç»´å±‚**ï¼šå®æ—¶ç›‘æ§ã€å‘Šè­¦é€šçŸ¥
- **å¤–éƒ¨æœåŠ¡å±‚**ï¼šç¬¬ä¸‰æ–¹é›†æˆã€åŠŸèƒ½æ‰©å±•
- **å¼€å‘è¿ç»´å±‚**ï¼šæŒç»­é›†æˆã€è‡ªåŠ¨åŒ–éƒ¨ç½²

### 8. æ²ƒå¾·åˆ©åœ°å›¾ (Wardley Map)

**ç›®æ ‡å—ä¼—ï¼š** æ¶æ„å¸ˆã€æŠ€æœ¯ç®¡ç†è€…ã€äº§å“ç»ç†  
**æŠ½è±¡çº§åˆ«ï¼š** æˆ˜ç•¥è§„åˆ’è§†è§’

å±•ç¤ºç³»ç»Ÿç»„ä»¶åœ¨ä»·å€¼é“¾å’Œæ¼”åŒ–è½´ä¸Šçš„æˆ˜ç•¥ä½ç½®ï¼š

- **ä»·å€¼é“¾ (Yè½´)**ï¼šä»ç”¨æˆ·éœ€æ±‚åˆ°åŸºç¡€è®¾æ–½çš„å‚ç›´åˆ†å±‚
  - ç”¨æˆ·éœ€æ±‚å±‚ï¼šå³æ—¶é€šè®¯ã€éŸ³è§†é¢‘é€šè¯ã€æ–‡ä»¶å…±äº«
  - ç”¨æˆ·ç•Œé¢å±‚ï¼šWebåº”ç”¨ã€ç§»åŠ¨åº”ç”¨
  - ä¸šåŠ¡èƒ½åŠ›å±‚ï¼šæ¶ˆæ¯å¤„ç†ã€ç”¨æˆ·è®¤è¯ã€é€šè¯ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ã€æœç´¢æœåŠ¡
  - æ•°æ®å±‚ï¼šç”¨æˆ·æ•°æ®ã€æ¶ˆæ¯æ•°æ®ã€æ–‡ä»¶æ•°æ®ã€ç´¢å¼•æ•°æ®
  - åŸºç¡€è®¾æ–½å±‚ï¼šæ•°æ®åº“ã€ç¼“å­˜ã€å­˜å‚¨ã€ç½‘ç»œã€è®¡ç®—èµ„æº

- **æ¼”åŒ–é˜¶æ®µ (Xè½´)**ï¼šä»åˆ›æ–°åˆ°å•†å“çš„æ°´å¹³æ¼”è¿›
  - **Genesis (åˆ›æ–°)**ï¼šWebRTCéŸ³è§†é¢‘ã€å®æ—¶æ¨é€ã€æ¶ˆæ¯æœç´¢ - é«˜åº¦å®šåˆ¶åŒ–ï¼Œå·®å¼‚åŒ–ç«äº‰ä¼˜åŠ¿
  - **Custom-built (å®šåˆ¶)**ï¼šæ¶ˆæ¯å¤„ç†é€»è¾‘ã€ç”¨æˆ·è®¤è¯ç³»ç»Ÿã€æ–‡ä»¶ç®¡ç† - å†…éƒ¨æ„å»ºï¼Œç‰¹å®šä¸šåŠ¡éœ€æ±‚
  - **Product (äº§å“)**ï¼šNext.jsã€Flutterã€NestJSã€Prismaã€Socket.io - æ ‡å‡†åŒ–äº§å“ï¼Œå¯é…ç½®
  - **Commodity (å•†å“)**ï¼šPostgreSQLã€Redisã€S3ã€CDNã€HTTP/HTTPSã€Docker - é€šç”¨æœåŠ¡ï¼ŒæŒ‰éœ€ä½¿ç”¨

**ä½¿ç”¨åœºæ™¯ï¼š**

- æŠ€æœ¯é€‰å‹å†³ç­–ï¼šè¯†åˆ«å“ªäº›ç»„ä»¶åº”è¯¥è‡ªå»ºï¼Œå“ªäº›åº”è¯¥ä½¿ç”¨ç°æˆäº§å“
- æ¶æ„æ¼”è¿›è§„åˆ’ï¼šç†è§£ç»„ä»¶ä»åˆ›æ–°åˆ°å•†å“çš„æ¼”è¿›è·¯å¾„
- æˆæœ¬ä¼˜åŒ–åˆ†æï¼šè¯†åˆ«å¯ä»¥å•†å“åŒ–çš„ç»„ä»¶ä»¥é™ä½æˆæœ¬
- ç«äº‰ä¼˜åŠ¿è¯†åˆ«ï¼šæ˜ç¡®å“ªäº›æ˜¯å·®å¼‚åŒ–èƒ½åŠ›ï¼Œå“ªäº›æ˜¯é€šç”¨èƒ½åŠ›

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### å¼€å‘äººå‘˜

- **æ–°äººå…¥èŒ**ï¼šå¿«é€Ÿäº†è§£ç³»ç»Ÿæ•´ä½“æ¶æ„å’ŒæŠ€æœ¯æ ˆ
- **åŠŸèƒ½å¼€å‘**ï¼šæ˜ç¡®æ¨¡å—èŒè´£å’Œä¾èµ–å…³ç³»
- **é—®é¢˜æ’æŸ¥**ï¼šç†è§£æ•°æ®æµå’Œè°ƒç”¨é“¾è·¯
- **ä»£ç é‡æ„**ï¼šè¯†åˆ«è€¦åˆç‚¹å’Œæ”¹è¿›æ–¹å‘

### æ¶æ„å¸ˆ

- **æ¶æ„è®¾è®¡**ï¼šç³»ç»Ÿè®¾è®¡å†³ç­–çš„å¯è§†åŒ–è®°å½•
- **æŠ€æœ¯é€‰å‹**ï¼šè¯„ä¼°æŠ€æœ¯æ–¹æ¡ˆçš„åˆç†æ€§
- **æ¶æ„æ¼”è¿›**ï¼šè§„åˆ’ç³»ç»Ÿå‡çº§å’Œæ‰©å±•è·¯å¾„
- **æ¶æ„è¯„å®¡**ï¼šæŠ€æœ¯æ–¹æ¡ˆçš„è¯„ä¼°å’Œè®¨è®º

### é¡¹ç›®ç®¡ç†

- **é¡¹ç›®è§„åˆ’**ï¼šç†è§£ç³»ç»Ÿå¤æ‚åº¦å’Œå¼€å‘å·¥ä½œé‡
- **å›¢é˜Ÿåä½œ**ï¼šæ˜ç¡®ä¸åŒè§’è‰²çš„èŒè´£è¾¹ç•Œ
- **è¿›åº¦è·Ÿè¸ª**ï¼šåŸºäºæ¶æ„æ¨¡å—åˆ’åˆ†å¼€å‘ä»»åŠ¡
- **é£é™©è¯„ä¼°**ï¼šè¯†åˆ«æŠ€æœ¯é£é™©å’Œä¾èµ–å…³ç³»

### äº§å“ç»ç†

- **éœ€æ±‚åˆ†æ**ï¼šç†è§£åŠŸèƒ½å®ç°çš„æŠ€æœ¯çº¦æŸ
- **æ–¹æ¡ˆè¯„ä¼°**ï¼šè¯„ä¼°æ–°åŠŸèƒ½å¯¹ç³»ç»Ÿæ¶æ„çš„å½±å“
- **æ²Ÿé€šåè°ƒ**ï¼šä¸æŠ€æœ¯å›¢é˜Ÿçš„æœ‰æ•ˆæ²Ÿé€šå·¥å…·

## ğŸ“ˆ æ¶æ„æ¼”è¿›å†å²

### v1.0 - åŸºç¡€æ¶æ„

- å•ä½“Webåº”ç”¨
- ç®€å•çš„æ¶ˆæ¯ä¼ é€’
- åŸºæœ¬çš„ç”¨æˆ·è®¤è¯

### v2.0 - å¾®æœåŠ¡åŒ–

- æœåŠ¡æ‹†åˆ†å’Œå®¹å™¨åŒ–
- å¼•å…¥Redisç¼“å­˜
- æ·»åŠ æ–‡ä»¶å­˜å‚¨æœåŠ¡

### v3.0 - ç§»åŠ¨ç«¯æ”¯æŒ

- Flutterç§»åŠ¨åº”ç”¨
- æ¨é€é€šçŸ¥é›†æˆ
- éŸ³è§†é¢‘é€šè¯åŠŸèƒ½

### v4.0 - ä¼ä¸šçº§æ”¹é€ 

- Kuberneteséƒ¨ç½²
- å¾®æœåŠ¡æ¶æ„
- å®Œæ•´çš„ç›‘æ§ä½“ç³»
- CI/CDè‡ªåŠ¨åŒ–

### v4.1 - ä»£ç é‡æ„ä¼˜åŒ– (2025å¹´10æœˆ)

- **Webåº”ç”¨ç»„ä»¶é‡æ„**ï¼šå°† 764 è¡Œçš„å•ä½“ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªè‡ªå®šä¹‰ Hooks
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šåˆ›å»ºäº† `useMessages`ã€`useSearch`ã€`useDialogs`ã€`useNavigation` ç­‰ä¸“ç”¨ Hooks
- **ä»£ç è´¨é‡æå‡**ï¼šé›¶ Linting é”™è¯¯ï¼Œå®Œå–„çš„ TypeScript ç±»å‹å®šä¹‰
- **å¯ç»´æŠ¤æ€§å¢å¼º**ï¼šå…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå•ä¸€èŒè´£åŸåˆ™
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ useCallback é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
- **å¯å¤ç”¨æ€§**ï¼šè‡ªå®šä¹‰ Hooks å¯åœ¨å…¶ä»–ç»„ä»¶ä¸­å¤ç”¨

#### é‡æ„è¯¦æƒ…

**æ–°å¢æ–‡ä»¶ç»“æ„ï¼š**

```text
apps/web/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ use-messages.ts      # æ¶ˆæ¯ç®¡ç†é€»è¾‘
â”‚   â”œâ”€â”€ use-search.ts        # æœç´¢åŠŸèƒ½é€»è¾‘
â”‚   â”œâ”€â”€ use-dialogs.ts       # å¯¹è¯æ¡†çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ use-navigation.ts    # é¡µé¢å¯¼èˆªé€»è¾‘
â”œâ”€â”€ data/
â”‚   â””â”€â”€ mock-data.ts         # æ¨¡æ‹Ÿæ•°æ®é›†ä¸­ç®¡ç†
â””â”€â”€ lib/
    â””â”€â”€ message-utils.ts     # æ¶ˆæ¯å¤„ç†å·¥å…·å‡½æ•°
```

**é‡æ„æˆæœï¼š**

- ä¸»ç»„ä»¶ä»£ç è¡Œæ•°ä» 764 è¡Œå‡å°‘åˆ°çº¦ 400 è¡Œ
- åˆ›å»ºäº† 4 ä¸ªè‡ªå®šä¹‰ Hooks å’Œ 2 ä¸ªå·¥å…·æ–‡ä»¶
- æé«˜äº†ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§
- ä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•å¥ å®šäº†è‰¯å¥½çš„æ¶æ„åŸºç¡€

### v4.2 - NestJS æ•´æ´æ¶æ„è¿ç§» (å½“å‰)

- **åç«¯æ¡†æ¶å‡çº§**ï¼šä» Express è¿ç§»åˆ° NestJS 10
- **æ¶æ„é‡æ„**ï¼šé‡‡ç”¨æ•´æ´æ¶æ„ï¼ˆClean Architectureï¼‰è®¾è®¡
  - é¢†åŸŸå±‚ï¼ˆDomainï¼‰ï¼šæ ¸å¿ƒä¸šåŠ¡å®ä½“å’Œæ¥å£
  - åº”ç”¨å±‚ï¼ˆApplicationï¼‰ï¼šä¸šåŠ¡é€»è¾‘å®ç°
  - åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰ï¼šå¤–éƒ¨ä¾èµ–å®ç°
  - è¡¨ç°å±‚ï¼ˆPresentationï¼‰ï¼šAPI æ¥å£å’Œ WebSocket ç½‘å…³
- **ä»£ç ç»„ç»‡ä¼˜åŒ–**ï¼šæ¸…æ™°çš„å±‚æ¬¡åˆ’åˆ†ï¼Œæé«˜å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§
- **ç±»å‹å®‰å…¨**ï¼šå®Œå–„çš„ TypeScript ç±»å‹å®šä¹‰
- **API æ–‡æ¡£**ï¼šé›†æˆ Swagger/OpenAPI æ–‡æ¡£
- **æµ‹è¯•è¦†ç›–**ï¼šä½¿ç”¨ Vitest è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### v5.0 - æœªæ¥è§„åˆ’

- æœåŠ¡ç½‘æ ¼æ¶æ„
- äººå·¥æ™ºèƒ½é›†æˆ
- å¤šäº‘éƒ¨ç½²ç­–ç•¥
- è¾¹ç¼˜è®¡ç®—æ”¯æŒ

## ğŸ“ æ–‡æ¡£ç»´æŠ¤

### æ›´æ–°åŸåˆ™

1. **æ¶æ„å˜æ›´æ—¶å¿…é¡»æ›´æ–°**ï¼šä»»ä½•å½±å“ç³»ç»Ÿæ¶æ„çš„ä¿®æ”¹éƒ½éœ€è¦æ›´æ–°å¯¹åº”çš„å›¾è¡¨
2. **æŠ€æœ¯æ ˆå˜æ›´æ—¶å¿…é¡»æ›´æ–°**ï¼šå‡çº§æˆ–æ›¿æ¢æŠ€æœ¯ç»„ä»¶æ—¶éœ€è¦æ›´æ–°ç›¸å…³è¯´æ˜
3. **å®šæœŸReview**ï¼šæ¯ä¸ªç‰ˆæœ¬å‘å¸ƒå‰Reviewæ¶æ„å›¾çš„å‡†ç¡®æ€§

### æ›´æ–°æµç¨‹

1. ä¿®æ”¹å¯¹åº”çš„ `.puml` æ–‡ä»¶
2. é‡æ–°ç”Ÿæˆå›¾ç‰‡å¹¶éªŒè¯
3. æ›´æ–°ç›¸å…³æ–‡æ¡£è¯´æ˜
4. æäº¤ä»£ç å®¡æŸ¥
5. é€šçŸ¥ç›¸å…³å›¢é˜Ÿæˆå‘˜

### è´¨é‡æ ‡å‡†

- **ä¸€è‡´æ€§**ï¼šæ‰€æœ‰å›¾è¡¨ä½¿ç”¨ç»Ÿä¸€çš„å‘½åå’Œé£æ ¼
- **å‡†ç¡®æ€§**ï¼šå›¾è¡¨å†…å®¹ä¸å®é™…ä»£ç ä¿æŒä¸€è‡´
- **å®Œæ•´æ€§**ï¼šè¦†ç›–ç³»ç»Ÿçš„ä¸»è¦ç»„ä»¶å’Œäº¤äº’
- **å¯è¯»æ€§**ï¼šå›¾è¡¨æ¸…æ™°æ˜“æ‡‚ï¼Œé€‚åˆç›®æ ‡å—ä¼—

## ğŸ”— ç›¸å…³é“¾æ¥

- [C4 æ¨¡å‹å®˜æ–¹æ–‡æ¡£](https://c4model.com/)
- [PlantUML å®˜æ–¹ç½‘ç«™](https://plantuml.com/)
- [PlantUML C4 è¯­æ³•](https://github.com/plantuml-stdlib/C4-PlantUML)
- [æ¶æ„å›¾æœ€ä½³å®è·µ](https://c4model.com/review/)
- [ç³»ç»Ÿæ¶æ„è®¾è®¡åŸåˆ™](https://docs.microsoft.com/en-us/azure/architecture/guide/)

## ğŸ”— å¿«é€Ÿå¯¼èˆª

### æ–°æ‰‹æŒ‡å—

- [`project-records/glossary/glossary.md`](./project-records/glossary/glossary.md) - äº†è§£é¡¹ç›®æœ¯è¯­
- [`requirements/functional/requirements.md`](./requirements/functional/requirements.md) - äº†è§£é¡¹ç›®éœ€æ±‚
- [`architecture/decisions/adr.md`](./architecture/decisions/adr.md) - äº†è§£æŠ€æœ¯é€‰å‹

### å¼€å‘æŒ‡å—

- [`development/guides/development-guide.md`](./development/guides/development-guide.md) - å¼€å‘ç¯å¢ƒè®¾ç½®å’Œä»£ç è§„èŒƒ
- [`development/api/api-documentation.md`](./development/api/api-documentation.md) - è¯¦ç»†çš„APIæ¥å£è¯´æ˜
- [`development/testing/testing-guide.md`](./development/testing/testing-guide.md) - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2Eæµ‹è¯•
- [`development/contributing/contributing-guide.md`](./development/contributing/contributing-guide.md) - ä»£ç è´¡çŒ®æµç¨‹å’Œè§„èŒƒ

### æœåŠ¡å™¨æ–‡æ¡£

- [`server/README.md`](./server/README.md) - æœåŠ¡å™¨å¿«é€Ÿå¼€å§‹å’ŒAPIæ–‡æ¡£
- [`server/DOCKER.md`](./server/DOCKER.md) - Dockeréƒ¨ç½²æŒ‡å—
- [`server/MIGRATION.md`](./server/MIGRATION.md) - Expressåˆ°NestJSè¿ç§»è¯´æ˜
- [`server/testing.md`](./server/testing.md) - æœåŠ¡å™¨æµ‹è¯•æŒ‡å—

#### ä»£ç é‡æ„æœ€ä½³å®è·µ

**è‡ªå®šä¹‰ Hooks è®¾è®¡åŸåˆ™ï¼š**

- **å•ä¸€èŒè´£**ï¼šæ¯ä¸ª Hook ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½é¢†åŸŸ
- **å¯å¤ç”¨æ€§**ï¼šHook å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨
- **ç±»å‹å®‰å…¨**ï¼šå®Œå–„çš„ TypeScript ç±»å‹å®šä¹‰
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨ useCallback å’Œ useMemo

**ç»„ä»¶é‡æ„æ¨¡å¼ï¼š**

- **çŠ¶æ€åˆ†ç¦»**ï¼šå°†ç›¸å…³çŠ¶æ€åˆ†ç»„åˆ°ä¸åŒçš„ Hooks ä¸­
- **é€»è¾‘æå–**ï¼šå°†å¤æ‚é€»è¾‘æå–åˆ°å·¥å…·å‡½æ•°ä¸­
- **æ•°æ®é›†ä¸­**ï¼šæ¨¡æ‹Ÿæ•°æ®é›†ä¸­ç®¡ç†ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤
- **å…³æ³¨ç‚¹åˆ†ç¦»**ï¼šUI æ¸²æŸ“ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»

**é‡æ„ç¤ºä¾‹ï¼š**

```typescript
// é‡æ„å‰ï¼šå•ä½“ç»„ä»¶ï¼Œæ‰€æœ‰é€»è¾‘æ··åœ¨ä¸€èµ·
export function WhatsAppMain() {
  const [messageText, setMessageText] = useState("");
  const [searchQuery, setSearchQuery] = useState("");
  // ... å¤§é‡çŠ¶æ€å’Œé€»è¾‘
}

// é‡æ„åï¼šä½¿ç”¨è‡ªå®šä¹‰ Hooksï¼ŒèŒè´£æ¸…æ™°
export function WhatsAppMain() {
  const { messageText, handleMessageChange } = useMessages();
  const { searchQuery, handleSearchChange } = useSearch();
  // ... æ¸…æ™°çš„èŒè´£åˆ†å·¥
}
```

### æ¶æ„è®¾è®¡

- [`architecture/architecture-overview.puml`](./architecture/architecture-overview.puml) - æ•´ä½“æŠ€æœ¯æ¶æ„
- [`wardley-map/wardley-map.puml`](./wardley-map/wardley-map.puml) - æ²ƒå¾·åˆ©åœ°å›¾ï¼ˆæˆ˜ç•¥è§„åˆ’è§†è§’ï¼‰
- [`architecture/database/database-design.md`](./architecture/database/database-design.md) - æ•°æ®åº“è®¾è®¡å’ŒERå›¾
- [`architecture/c4-deployment.puml`](./architecture/c4-deployment.puml) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [`architecture/sequence-diagrams/README.md`](./architecture/sequence-diagrams/README.md) - ä¸šåŠ¡æµç¨‹æ—¶åºå›¾

### è¿ç»´éƒ¨ç½²

- [`operations/deployment/deployment-guide.md`](./operations/deployment/deployment-guide.md) - Dockerå’ŒKuberneteséƒ¨ç½²
- [`operations/security/security-guide.md`](./operations/security/security-guide.md) - å®‰å…¨æœ€ä½³å®è·µå’Œé˜²æŠ¤æªæ–½
- [`operations/troubleshooting/troubleshooting-guide.md`](./operations/troubleshooting/troubleshooting-guide.md) - å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

### é¡¹ç›®è®°å½•

- [`project-records/changelog/CHANGELOG.md`](./project-records/changelog/CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°è®°å½•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æŸ¥çœ‹æ¶æ„å›¾

1. å…‹éš†é¡¹ç›®ä»£ç 
2. å®‰è£…PlantUMLæ’ä»¶
3. æ‰“å¼€å¯¹åº”çš„`.puml`æ–‡ä»¶
4. é¢„è§ˆç”Ÿæˆçš„æ¶æ„å›¾

### ä¿®æ”¹æ¶æ„å›¾

1. ç¼–è¾‘`.puml`æ–‡ä»¶
2. å®æ—¶é¢„è§ˆä¿®æ”¹æ•ˆæœ
3. ç”Ÿæˆæœ€ç»ˆçš„å›¾ç‰‡æ–‡ä»¶
4. æäº¤ä»£ç å˜æ›´

### ç”Ÿæˆæ–‡æ¡£

```bash
# ç”Ÿæˆæ‰€æœ‰æ¶æ„å›¾
plantuml docs/*.puml

# ç”Ÿæˆç‰¹å®šæ¶æ„å›¾
plantuml docs/architecture/c4-system-context.puml

# ç”ŸæˆSVGæ ¼å¼
plantuml -tsvg docs/*.puml
```

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰æ¶æ„å›¾ç›¸å…³é—®é¢˜ï¼Œè¯·è”ç³»ï¼š

- **é‚®ç®±**ï¼šz1434866867@gmail.com
- **é¡¹ç›®Issues**ï¼š[GitHub Issues](https://github.com/your-username/whatschat/issues)
- **æŠ€æœ¯è®¨è®º**ï¼šåŠ å…¥é¡¹ç›®è®¨è®ºç¾¤ç»„

## ğŸ“„ è®¸å¯è¯

æœ¬æ¶æ„æ–‡æ¡£é‡‡ç”¨ [MIT License](../LICENSE) å¼€æºè®¸å¯è¯ã€‚

---

## æ–‡æ¡£æ›´æ–°è®°å½•

æœ¬æ–‡æ¡£éšé¡¹ç›®æ¶æ„æ¼”è¿›æŒç»­æ›´æ–°ï¼Œæœ€åæ›´æ–°æ—¶é—´ï¼š2025å¹´12æœˆï¼ˆNestJS æ•´æ´æ¶æ„è¿ç§»ç‰ˆæœ¬ï¼‰

### ä¸»è¦æ›´æ–°å†…å®¹

- âœ… æ›´æ–°æŠ€æœ¯æ ˆä¿¡æ¯ï¼ˆNestJS 10ï¼‰
- âœ… æ·»åŠ æ•´æ´æ¶æ„è¯´æ˜
- âœ… æ›´æ–°é¡¹ç›®ç»“æ„æè¿°
- âœ… æ›´æ–°ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜
- âœ… æ›´æ–° API æ–‡æ¡£é“¾æ¥ï¼ˆSwaggerï¼‰
- âœ… æ›´æ–°éƒ¨ç½²è¯´æ˜ï¼ˆDocker Composeï¼‰
